<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://boopathi.in/sw-cache-all/styles.css" type="text/css" rel="stylesheet" />
</head>

<body>
  <h1>Photos of Cat</h1>
  <ul id="cats"></ul>
  <script>
    var flickr_api_key = "208dae30f9b67f9b1870a81f5feb0328";
    var flickr_api_url = "https://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&api_key=" + flickr_api_key;
  </script>
  <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
  <script>
    function jsonFlickrApi(response) {
      var cats = $("#cats");
      $.each(response.photos.photo, function (i, item) {
        var src = "https://farm"
          + item.farm
          + ".static.flickr.com/"
          + item.server
          + "/" + item.id
          + "_" + item.secret
          + "_n.jpg";
        var container = $("<li/>").appendTo(cats);
        $("<img/>").attr("src", src).appendTo(container);
      });
    }

    $(function () {
      $.ajax({
        url: flickr_api_url,
        method: 'GET',
        dataType: 'jsonp',
        jsonpCallback: 'jsonFlickrApi',
        cache: true,
        data: {
          tags: 'cat',
          safe_search: 1,
          per_page: 20
        },
        error: function (err) {
          console.log(err);
        }
      });
    });

    if (navigator.serviceWorker) {
      navigator
        .serviceWorker
        .register('sw-cats.js')
        .then(function (r) {
          console.log('Cats are now available offline');
        })
        .catch(function (e) {
          console.log('Cats are NOT available offline');
          console.log(e);
        });
    } else {
      console.log('Service workers are not supported');
    }
  </script>
</body>

</html>